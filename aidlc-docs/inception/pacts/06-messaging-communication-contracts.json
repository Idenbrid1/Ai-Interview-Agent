{
  "consumer": {
    "name": "NextJS-Frontend"
  },
  "provider": {
    "name": "Messaging-Communication-Service"
  },
  "interactions": [
    {
      "description": "Send message to users (admin)",
      "providerState": "admin is authenticated and target users exist",
      "request": {
        "method": "POST",
        "path": "/api/admin/messages",
        "headers": {
          "Authorization": "Bearer admin_jwt_token",
          "Content-Type": "application/json"
        },
        "body": {
          "recipients": {
            "type": "specific",
            "userIds": ["user-123", "user-456"]
          },
          "title": "Important Platform Update",
          "content": "We've released new features that will enhance your interview experience...",
          "priority": "normal",
          "scheduledAt": null,
          "notificationChannels": ["email", "in_app"]
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Message sent successfully",
          "data": {
            "messageId": "msg-789",
            "sentAt": "2024-01-26T10:00:00Z",
            "recipientCount": 2,
            "deliveryStatus": {
              "sent": 2,
              "delivered": 0,
              "failed": 0
            },
            "estimatedDelivery": "2024-01-26T10:05:00Z"
          }
        }
      }
    },
    {
      "description": "Create announcement for all users",
      "providerState": "admin is authenticated",
      "request": {
        "method": "POST",
        "path": "/api/admin/announcements",
        "headers": {
          "Authorization": "Bearer admin_jwt_token",
          "Content-Type": "application/json"
        },
        "body": {
          "title": "System Maintenance Scheduled",
          "content": "We will be performing scheduled maintenance on February 1st from 2:00 AM to 4:00 AM JST...",
          "priority": "high",
          "displayUntil": "2024-02-02T00:00:00Z",
          "targetAudience": "all_users",
          "notificationChannels": ["email", "in_app", "dashboard"]
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Announcement created and scheduled for delivery",
          "data": {
            "announcementId": "ann-456",
            "createdAt": "2024-01-26T11:00:00Z",
            "targetUserCount": 5000,
            "deliveryStatus": "processing",
            "estimatedCompletion": "2024-01-26T11:30:00Z"
          }
        }
      }
    },
    {
      "description": "Get user messages and announcements",
      "providerState": "user is authenticated and has messages",
      "request": {
        "method": "GET",
        "path": "/api/messages",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "query": {
          "type": "all",
          "page": "1",
          "limit": "20",
          "unreadOnly": "false"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "data": {
            "messages": [
              {
                "id": "msg-789",
                "type": "direct_message",
                "title": "Important Platform Update",
                "content": "We've released new features that will enhance your interview experience...",
                "sentAt": "2024-01-26T10:00:00Z",
                "readAt": null,
                "priority": "normal",
                "sender": {
                  "type": "admin",
                  "name": "Platform Team"
                }
              },
              {
                "id": "ann-456",
                "type": "announcement",
                "title": "System Maintenance Scheduled",
                "content": "We will be performing scheduled maintenance on February 1st...",
                "sentAt": "2024-01-26T11:00:00Z",
                "readAt": "2024-01-26T12:00:00Z",
                "priority": "high",
                "displayUntil": "2024-02-02T00:00:00Z"
              }
            ],
            "unreadCount": 1,
            "pagination": {
              "currentPage": 1,
              "totalPages": 2,
              "totalMessages": 25,
              "hasNext": true,
              "hasPrevious": false
            }
          }
        }
      }
    },
    {
      "description": "Create company recommendation letter",
      "providerState": "user is authenticated and company exists",
      "request": {
        "method": "POST",
        "path": "/api/company-messages",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "body": {
          "companyId": "company-789",
          "title": "Application for Software Engineer Position",
          "content": "Dear Hiring Manager, I am writing to express my strong interest in the Software Engineer position...",
          "attachments": [
            {
              "type": "resume",
              "documentId": "doc-123"
            },
            {
              "type": "portfolio",
              "url": "https://portfolio.example.com"
            }
          ]
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Recommendation letter sent successfully",
          "data": {
            "messageId": "company-msg-456",
            "companyId": "company-789",
            "companyName": "Tech Corp",
            "sentAt": "2024-01-26T13:00:00Z",
            "status": "sent",
            "trackingId": "track-789",
            "estimatedResponse": "3-5 business days"
          }
        }
      }
    },
    {
      "description": "Get user recommendation letters status",
      "providerState": "user is authenticated and has sent recommendation letters",
      "request": {
        "method": "GET",
        "path": "/api/company-messages",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "query": {
          "status": "all",
          "page": "1",
          "limit": "10"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "data": {
            "recommendations": [
              {
                "id": "company-msg-456",
                "companyId": "company-789",
                "companyName": "Tech Corp",
                "title": "Application for Software Engineer Position",
                "sentAt": "2024-01-26T13:00:00Z",
                "status": "sent",
                "adminStatus": "pending",
                "trackingId": "track-789",
                "lastUpdated": "2024-01-26T13:00:00Z",
                "responseExpected": "2024-01-31T13:00:00Z"
              }
            ],
            "statusCounts": {
              "sent": 3,
              "under_review": 1,
              "approved": 2,
              "rejected": 0
            },
            "pagination": {
              "currentPage": 1,
              "totalPages": 1,
              "totalRecommendations": 6,
              "hasNext": false,
              "hasPrevious": false
            }
          }
        }
      }
    },
    {
      "description": "Mark message as read",
      "providerState": "user is authenticated and message exists and is unread",
      "request": {
        "method": "PUT",
        "path": "/api/messages/msg-789/read",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Message marked as read",
          "data": {
            "messageId": "msg-789",
            "readAt": "2024-01-26T14:00:00Z",
            "unreadCount": 0
          }
        }
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "2.0.0"
    }
  }
}
