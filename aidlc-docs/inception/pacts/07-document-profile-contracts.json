{
  "consumer": {
    "name": "NextJS-Frontend"
  },
  "provider": {
    "name": "Document-Profile-Service"
  },
  "interactions": [
    {
      "description": "Upload document to user drive",
      "providerState": "user is authenticated and has storage quota available",
      "request": {
        "method": "POST",
        "path": "/api/documents/upload",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "multipart/form-data"
        },
        "body": {
          "file": "binary_file_data",
          "category": "job_hunting",
          "documentType": "resume",
          "fileName": "resume_john_doe.pdf",
          "description": "Updated resume for software engineer positions"
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Document uploaded successfully",
          "data": {
            "documentId": "doc-456",
            "fileName": "resume_john_doe.pdf",
            "originalName": "resume_john_doe.pdf",
            "fileSize": 2048576,
            "mimeType": "application/pdf",
            "category": "job_hunting",
            "documentType": "resume",
            "uploadedAt": "2024-01-26T15:00:00Z",
            "downloadUrl": "https://documents.example.com/user-123/doc-456.pdf",
            "previewUrl": "https://documents.example.com/preview/doc-456",
            "ocrStatus": "processing",
            "storageUsed": {
              "current": "150MB",
              "limit": "500MB",
              "percentage": 30
            }
          }
        }
      }
    },
    {
      "description": "Get user documents list",
      "providerState": "user is authenticated and has documents",
      "request": {
        "method": "GET",
        "path": "/api/documents",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "query": {
          "category": "all",
          "documentType": "all",
          "page": "1",
          "limit": "20",
          "sortBy": "uploadedAt",
          "sortOrder": "desc"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "data": {
            "documents": [
              {
                "id": "doc-456",
                "fileName": "resume_john_doe.pdf",
                "originalName": "resume_john_doe.pdf",
                "fileSize": 2048576,
                "mimeType": "application/pdf",
                "category": "job_hunting",
                "documentType": "resume",
                "uploadedAt": "2024-01-26T15:00:00Z",
                "lastModified": "2024-01-26T15:00:00Z",
                "downloadUrl": "https://documents.example.com/user-123/doc-456.pdf",
                "previewUrl": "https://documents.example.com/preview/doc-456",
                "ocrStatus": "completed",
                "aiAnalysis": {
                  "status": "completed",
                  "score": 8.5,
                  "suggestions": [
                    "Add more quantifiable achievements",
                    "Include relevant keywords"
                  ]
                }
              }
            ],
            "storageInfo": {
              "used": "150MB",
              "limit": "500MB",
              "percentage": 30,
              "documentsCount": 8
            },
            "categories": {
              "job_hunting": 5,
              "career_change": 3
            },
            "pagination": {
              "currentPage": 1,
              "totalPages": 1,
              "totalDocuments": 8,
              "hasNext": false,
              "hasPrevious": false
            }
          }
        }
      }
    },
    {
      "description": "Get document analysis and suggestions",
      "providerState": "user is authenticated and document exists with completed analysis",
      "request": {
        "method": "GET",
        "path": "/api/documents/doc-456/analysis",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "data": {
            "documentId": "doc-456",
            "analysisCompletedAt": "2024-01-26T15:05:00Z",
            "overallScore": 8.5,
            "analysis": {
              "structure": {
                "score": 9.0,
                "feedback": "Well-organized with clear sections"
              },
              "content": {
                "score": 8.0,
                "feedback": "Strong experience descriptions, could use more quantifiable results"
              },
              "keywords": {
                "score": 8.5,
                "feedback": "Good use of industry-relevant keywords",
                "suggestions": ["React", "TypeScript", "AWS", "Agile"]
              },
              "formatting": {
                "score": 9.0,
                "feedback": "Professional formatting and layout"
              }
            },
            "suggestions": [
              {
                "category": "content",
                "priority": "high",
                "suggestion": "Add specific metrics to achievements (e.g., 'increased efficiency by 30%')"
              },
              {
                "category": "keywords",
                "priority": "medium",
                "suggestion": "Include more technical skills relevant to target positions"
              }
            ],
            "extractedText": {
              "available": true,
              "wordCount": 450,
              "preview": "John Doe\nSoftware Engineer\n\nExperience:\nSenior Developer at Tech Company..."
            }
          }
        }
      }
    },
    {
      "description": "Create document from template",
      "providerState": "user is authenticated and template exists",
      "request": {
        "method": "POST",
        "path": "/api/documents/create-from-template",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "body": {
          "templateId": "template-resume-new-grad",
          "category": "job_hunting",
          "documentType": "resume",
          "fileName": "my_resume_from_template.pdf",
          "personalData": {
            "name": "John Doe",
            "email": "john.doe@example.com",
            "phone": "+81-90-1234-5678",
            "address": "Tokyo, Japan",
            "education": [
              {
                "institution": "Tokyo University",
                "degree": "Bachelor of Computer Science",
                "graduationYear": "2024"
              }
            ],
            "experience": [],
            "skills": ["JavaScript", "React", "Node.js"]
          }
        }
      },
      "response": {
        "status": 201,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Document created from template successfully",
          "data": {
            "documentId": "doc-789",
            "fileName": "my_resume_from_template.pdf",
            "category": "job_hunting",
            "documentType": "resume",
            "createdAt": "2024-01-26T16:00:00Z",
            "templateUsed": {
              "id": "template-resume-new-grad",
              "name": "New Graduate Resume Template"
            },
            "editUrl": "https://editor.example.com/doc-789",
            "downloadUrl": "https://documents.example.com/user-123/doc-789.pdf",
            "previewUrl": "https://documents.example.com/preview/doc-789"
          }
        }
      }
    },
    {
      "description": "Get available document templates",
      "providerState": "user is authenticated",
      "request": {
        "method": "GET",
        "path": "/api/documents/templates",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        },
        "query": {
          "category": "job_hunting",
          "documentType": "resume"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "data": {
            "templates": [
              {
                "id": "template-resume-new-grad",
                "name": "New Graduate Resume Template",
                "description": "Professional resume template designed for new graduates",
                "category": "job_hunting",
                "documentType": "resume",
                "targetAudience": "new_graduate",
                "previewUrl": "https://templates.example.com/preview/template-resume-new-grad",
                "thumbnailUrl": "https://templates.example.com/thumb/template-resume-new-grad.jpg",
                "features": ["ATS-friendly", "Modern design", "Skills section"],
                "popularity": 95
              },
              {
                "id": "template-resume-experienced",
                "name": "Experienced Professional Resume Template",
                "description": "Resume template for professionals with work experience",
                "category": "career_change",
                "documentType": "resume",
                "targetAudience": "experienced",
                "previewUrl": "https://templates.example.com/preview/template-resume-experienced",
                "thumbnailUrl": "https://templates.example.com/thumb/template-resume-experienced.jpg",
                "features": [
                  "Experience-focused",
                  "Achievement highlights",
                  "Professional layout"
                ],
                "popularity": 88
              }
            ]
          }
        }
      }
    },
    {
      "description": "Delete document",
      "providerState": "user is authenticated and owns the document",
      "request": {
        "method": "DELETE",
        "path": "/api/documents/doc-456",
        "headers": {
          "Authorization": "Bearer user_jwt_token",
          "Content-Type": "application/json"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "success": true,
          "message": "Document deleted successfully",
          "data": {
            "documentId": "doc-456",
            "deletedAt": "2024-01-26T17:00:00Z",
            "storageFreed": 2048576,
            "newStorageUsage": {
              "used": "148MB",
              "limit": "500MB",
              "percentage": 29.6
            }
          }
        }
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "2.0.0"
    }
  }
}
